generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model User {
  id    String @id @default(uuid())
  name  String
  email String @unique

  @@index([email])
}

model Zone {
  id         String     @id @default(uuid())
  name       String
  createdAt  DateTime   @default(now())
  infoAccess InfoAccess @default(Public)
  sectors    Sector[]
}

enum InfoAccess {
  Public
  Community
  Private
}

model Sector {
  id        String   @id @default(uuid())
  name      String
  createdAt DateTime @default(now())
  Zone      Zone     @relation(fields: [zoneId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  zoneId    String
  walls     Wall[]

  @@index([zoneId])
}

model Wall {
  id        String   @id @default(uuid())
  name      String
  createdAt DateTime @default(now())
  Secotor   Sector   @relation(fields: [secotorId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  secotorId String

  @@index([secotorId])
}
